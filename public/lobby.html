<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
</head>
<body>
    <h1>
        Join Game with <span id="pin"></span>
    </h1>
    <ul>
        <li>
            <a href="host.html">Host Game</a>
        </li>
    </ul>
    <div id="qrcode"></div>
    <a id="link">link</a>
    <button>
        Start Game
    </button>


<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/master/qrcode.js"></script>
    <script src = "../socket.io/socket.io.js"></script>
    <script>
        var socket = io();

        socket.emit('startHosting', {
            game: 'exposed'
        });

        socket.on('hostPin', function(data){
            console.log(data);
            document.getElementById('pin').innerText = data.game.pin;
            let qrcode = new QRCode("qrcode");
            let link = `http://${data.ip}:3000/join/${data.game.name}/${data.game.pin}`;
            let anchor = document.getElementById('link');
            anchor.href = link;
            anchor.innerText = link;
            qrcode.makeCode(link);
        });

        socket.on('updateLobby',function(data){
            console.log('players on game ');
            console.log(data);
        });
    </script>

</body>
</html>